[... önceki içerik aynı kalacak ...]

<!-- Sistem Metrikleri -->
<div class="card mt-4">
    <div class="card-header">
        <h5 class="mb-0">Sistem Durumu</h5>
    </div>
    <div class="card-body system-metrics">
        <div class="row">
            <div class="col-md-6">
                <h6>Raspberry Pi</h6>
                <table class="table table-sm">
                    <tr>
                        <td>CPU Kullanımı</td>
                        <td id="cpu_percent">--%</td>
                    </tr>
                    <tr>
                        <td>CPU Sıcaklığı</td>
                        <td id="cpu_temp">--°C</td>
                    </tr>
                    <tr>
                        <td>RAM Kullanımı</td>
                        <td id="ram_percent">--%</td>
                    </tr>
                    <tr>
                        <td>Disk Kullanımı</td>
                        <td id="disk_percent">--%</td>
                    </tr>
                    <tr>
                        <td>Network (Gönderilen/Alınan)</td>
                        <td id="network_io">-- MB / -- MB</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-6">
                <h6>ESP32</h6>
                <table class="table table-sm">
                    <tr>
                        <td>CPU Frekansı</td>
                        <td id="esp_cpu_freq">-- MHz</td>
                    </tr>
                    <tr>
                        <td>Boş Hafıza</td>
                        <td id="esp_free_heap">-- KB</td>
                    </tr>
                    <tr>
                        <td>WiFi Sinyal</td>
                        <td id="esp_wifi_rssi">-- dBm</td>
                    </tr>
                    <tr>
                        <td>IP Adresi</td>
                        <td id="esp_wifi_ip">--</td>
                    </tr>
                    <tr>
                        <td>Çalışma Süresi</td>
                        <td id="esp_uptime">--:--:--</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

[... diğer içerik aynı kalacak ...]

<script>
    // ESP32 sistem metriklerini güncelle
    function updateESPMetrics() {
        fetch('/api/system/esp_metrics')
            .then(response => response.json())
            .then(data => {
                document.getElementById('esp_cpu_freq').textContent = data.cpu_freq + ' MHz';
                document.getElementById('esp_free_heap').textContent = (data.free_heap / 1024).toFixed(1) + ' KB';
                document.getElementById('esp_wifi_rssi').textContent = data.wifi.rssi + ' dBm';
                document.getElementById('esp_wifi_ip').textContent = data.wifi.ip;
                
                // Çalışma süresini saat:dakika:saniye formatına çevir
                const uptime = data.uptime_seconds;
                const hours = Math.floor(uptime / 3600);
                const minutes = Math.floor((uptime % 3600) / 60);
                const seconds = uptime % 60;
                document.getElementById('esp_uptime').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            });
    }

    // Periyodik güncelleme
    setInterval(updateSensors, 20000);  // Her 20 saniyede bir
    setInterval(updateSystemMetrics, 30000);  // Her 30 saniyede bir
    setInterval(updateESPMetrics, 30000);  // Her 30 saniyede bir

    // İlk yükleme
    updateSensors();
    updateSystemMetrics();
    updateESPMetrics();
</script>